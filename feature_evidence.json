{
  "kind": "feature_evidence_report",
  "features": [
    {
      "featureId": "feature-add-react-query-hooks-to-frontend-src-hooks-usequeries-ts-for-the-new-pin-backend-functions-useverifyadminpin-mutation-that-calls-verifyadminpin-with-the-submitted-pin-string-must-await-the-actor-call-unwrap-the-ok-err-result-variant-throw-a-javascript-error-on-err-and-return-the-boolean-result-useadminpinlockoutstatus-query-that-calls-getadminpinlockoutstatus-with-the-authenticated-user-s-principal-enabled-only-when-the-user-is-authenticated-with-staletime-0-and-retry-0-so-it-always-reflects-the-live-lockout-state",
      "featureTitle": "Add React Query hooks to `frontend/src/hooks/useQueries.ts` for the new PIN backend functions: `useVerifyAdminPin()` mutation that calls `verifyAdminPin` with the submitted PIN string — must await the actor call, unwrap the `#ok`/`#err` Result variant, throw a JavaScript `Error` on `#err`, and return the boolean result; `useAdminPinLockoutStatus()` query that calls `getAdminPinLockoutStatus` with the authenticated user's principal, enabled only when the user is authenticated, with `staleTime: 0` and `retry: 0` so it always reflects the live lockout state.",
      "files": [
        "frontend/src/hooks/useQueries.ts"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "qr-code@1.0.0",
        "camera@1.0.0"
      ],
      "testIds": [
        "REQ-115"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-rewrite-frontend-src-components-adminaccesscontrol-tsx-to-replace-all-previous-gate-logic-with-a-new-flow-1-if-the-user-is-not-authenticated-via-internet-identity-immediately-render-a-please-log-in-via-internet-identity-to-access-the-admin-panel-prompt-do-not-spin-or-show-a-pin-form-2-once-authenticated-render-a-styled-4-digit-pin-entry-screen-with-a-heading-admin-access-a-subheading-enter-the-4-digit-pin-to-continue-four-individual-single-digit-input-fields-or-a-single-4-character-pin-input-field-and-a-submit-button-use-a-form-element-with-onsubmit-so-both-enter-key-and-button-click-trigger-submission-3-the-onsubmit-handler-must-call-event-preventdefault-set-a-local-loading-state-then-call-the-backend-verifyadminpin-function-via-the-actor-directly-not-react-query-with-the-entered-pin-string-4-if-the-backend-returns-true-correct-pin-transition-to-status-granted-and-render-children-5-if-the-backend-returns-an-error-indicating-lockout-display-the-lockout-message-e-g-too-many-failed-attempts-try-again-in-x-minutes-and-disable-the-form-6-if-the-pin-is-wrong-but-the-principal-is-not-yet-locked-out-display-an-inline-error-such-as-incorrect-pin-x-attempts-remaining-and-clear-the-pin-input-7-any-thrown-error-is-caught-in-a-try-catch-and-displayed-as-an-inline-error-message-never-swallow-errors-silently-8-show-a-loading-spinner-only-while-the-verifyadminpin-call-is-in-flight-9-remove-all-previous-getusername-isadminusername-useusername-useisadminusername-and-username-based-gate-logic-from-this-component-entirely-10-apply-the-sunset-theme-dusk-bg-dusk-mid-backgrounds-sunset-gold-sunset-orange-accent-colours-orbitron-rajdhani-fonts-sunset-glow-effects-to-the-pin-entry-form",
      "featureTitle": "Rewrite `frontend/src/components/AdminAccessControl.tsx` to replace all previous gate logic with a new flow: (1) If the user is not authenticated via Internet Identity, immediately render a 'Please log in via Internet Identity to access the admin panel' prompt — do not spin or show a PIN form; (2) Once authenticated, render a styled 4-digit PIN entry screen with: a heading 'Admin Access', a subheading 'Enter the 4-digit PIN to continue', four individual single-digit input fields (or a single 4-character PIN input field), and a 'Submit' button — use a `<form>` element with `onSubmit` so both Enter key and button click trigger submission; (3) The `onSubmit` handler must call `event.preventDefault()`, set a local loading state, then call the backend `verifyAdminPin` function (via the actor directly, not React Query) with the entered PIN string; (4) If the backend returns `true` (correct PIN), transition to `status = 'granted'` and render children; (5) If the backend returns an error indicating lockout, display the lockout message (e.g. 'Too many failed attempts. Try again in X minutes.') and disable the form; (6) If the PIN is wrong but the principal is not yet locked out, display an inline error such as 'Incorrect PIN. X attempts remaining.' and clear the PIN input; (7) Any thrown error is caught in a try/catch and displayed as an inline error message — never swallow errors silently; (8) Show a loading spinner only while the `verifyAdminPin` call is in-flight; (9) Remove all previous `getUsername`, `isAdminUsername`, `useUsername`, `useIsAdminUsername`, and username-based gate logic from this component entirely; (10) Apply the sunset theme (dusk-bg/dusk-mid backgrounds, sunset-gold/sunset-orange accent colours, Orbitron/Rajdhani fonts, sunset glow effects) to the PIN entry form.",
      "files": [
        "frontend/src/components/AdminAccessControl.tsx"
      ],
      "components": [
        "authorization@4.0.0",
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "qr-code@1.0.0",
        "camera@1.0.0"
      ],
      "testIds": [
        "REQ-116"
      ],
      "confidence": "high"
    }
  ]
}